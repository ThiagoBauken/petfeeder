# PetFeeder MQTT Broker Configuration
# Eclipse Mosquitto 2.x

# ===========================================
# LISTENERS
# ===========================================

# Default MQTT port
listener 1883

# WebSocket listener (for browser clients)
listener 9001
protocol websockets

# ===========================================
# SECURITY
# ===========================================

# Allow anonymous connections (set to false in production)
allow_anonymous false

# Password file
password_file /mosquitto/config/passwd

# Access Control List
acl_file /mosquitto/config/acl.conf

# ===========================================
# PERSISTENCE
# ===========================================

persistence true
persistence_location /mosquitto/data/
autosave_interval 60

# ===========================================
# LOGGING
# ===========================================

log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ===========================================
# LIMITS
# ===========================================

max_connections -1
max_inflight_messages 20
max_queued_messages 1000
message_size_limit 0

# ===========================================
# MISC
# ===========================================

# Keep alive (seconds)
max_keepalive 60
