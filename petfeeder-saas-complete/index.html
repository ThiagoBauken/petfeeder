<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ PetFeeder Pro - Sistema de Alimenta√ß√£o Autom√°tica</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-paw"></i>
                    <h1>PetFeeder Pro</h1>
                </div>
                <div class="header-status">
                    <div class="status-item">
                        <i class="fas fa-wifi" id="wifi-icon"></i>
                        <span id="wifi-status">Conectado</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-clock"></i>
                        <span id="current-time">--:--</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-thermometer-half"></i>
                        <span id="temperature">--¬∞C</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
        <div class="container">
            <button class="tab-btn active" data-tab="dashboard">
                <i class="fas fa-home"></i>
                Dashboard
            </button>
            <button class="tab-btn" data-tab="pets">
                <i class="fas fa-cat"></i>
                Meus Pets
            </button>
            <button class="tab-btn" data-tab="schedule">
                <i class="fas fa-calendar-alt"></i>
                Hor√°rios
            </button>
            <button class="tab-btn" data-tab="history">
                <i class="fas fa-history"></i>
                Hist√≥rico
            </button>
            <button class="tab-btn" data-tab="settings">
                <i class="fas fa-cog"></i>
                Configura√ß√µes
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard-tab">
            <!-- Status Cards -->
            <div class="dashboard-grid">
                <!-- Pet Status Cards -->
                <div class="pet-cards">
                    <div class="pet-card" data-pet="1">
                        <div class="pet-header">
                            <div class="pet-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="fas fa-cat"></i>
                            </div>
                            <div class="pet-info">
                                <h3 id="pet1-name">Felix</h3>
                                <span class="pet-status active">Ativo</span>
                            </div>
                        </div>
                        <div class="pet-stats">
                            <div class="stat">
                                <span class="stat-label">√öltima refei√ß√£o</span>
                                <span class="stat-value" id="pet1-last-feed">07:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Pr√≥xima</span>
                                <span class="stat-value" id="pet1-next-feed">12:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Hoje</span>
                                <span class="stat-value" id="pet1-today">20g</span>
                            </div>
                        </div>
                        <button class="feed-btn" onclick="feedPet(1)">
                            <i class="fas fa-utensils"></i>
                            Alimentar Agora
                        </button>
                    </div>

                    <div class="pet-card" data-pet="2">
                        <div class="pet-header">
                            <div class="pet-avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-cat"></i>
                            </div>
                            <div class="pet-info">
                                <h3 id="pet2-name">Luna</h3>
                                <span class="pet-status active">Ativo</span>
                            </div>
                        </div>
                        <div class="pet-stats">
                            <div class="stat">
                                <span class="stat-label">√öltima refei√ß√£o</span>
                                <span class="stat-value" id="pet2-last-feed">07:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Pr√≥xima</span>
                                <span class="stat-value" id="pet2-next-feed">12:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Hoje</span>
                                <span class="stat-value" id="pet2-today">16.7g</span>
                            </div>
                        </div>
                        <button class="feed-btn" onclick="feedPet(2)">
                            <i class="fas fa-utensils"></i>
                            Alimentar Agora
                        </button>
                    </div>

                    <div class="pet-card" data-pet="3">
                        <div class="pet-header">
                            <div class="pet-avatar" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="fas fa-cat"></i>
                            </div>
                            <div class="pet-info">
                                <h3 id="pet3-name">Max</h3>
                                <span class="pet-status active">Ativo</span>
                            </div>
                        </div>
                        <div class="pet-stats">
                            <div class="stat">
                                <span class="stat-label">√öltima refei√ß√£o</span>
                                <span class="stat-value" id="pet3-last-feed">07:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Pr√≥xima</span>
                                <span class="stat-value" id="pet3-next-feed">12:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Hoje</span>
                                <span class="stat-value" id="pet3-today">23.3g</span>
                            </div>
                        </div>
                        <button class="feed-btn" onclick="feedPet(3)">
                            <i class="fas fa-utensils"></i>
                            Alimentar Agora
                        </button>
                    </div>
                </div>

                <!-- Food Level Monitors -->
                <div class="level-monitors">
                    <h2><i class="fas fa-chart-bar"></i> N√≠veis de Ra√ß√£o</h2>
                    <div class="level-cards">
                        <div class="level-card">
                            <div class="level-header">
                                <span>Compartimento 1</span>
                                <span class="level-percentage" id="level1-percent">75%</span>
                            </div>
                            <div class="level-bar-container">
                                <div class="level-bar" id="level1-bar" style="width: 75%; background: linear-gradient(90deg, #667eea, #764ba2);"></div>
                            </div>
                            <div class="level-info">
                                <i class="fas fa-weight"></i>
                                <span id="level1-weight">~750g</span>
                            </div>
                        </div>

                        <div class="level-card">
                            <div class="level-header">
                                <span>Compartimento 2</span>
                                <span class="level-percentage" id="level2-percent">60%</span>
                            </div>
                            <div class="level-bar-container">
                                <div class="level-bar" id="level2-bar" style="width: 60%; background: linear-gradient(90deg, #f093fb, #f5576c);"></div>
                            </div>
                            <div class="level-info">
                                <i class="fas fa-weight"></i>
                                <span id="level2-weight">~600g</span>
                            </div>
                        </div>

                        <div class="level-card">
                            <div class="level-header">
                                <span>Compartimento 3</span>
                                <span class="level-percentage" id="level3-percent">45%</span>
                            </div>
                            <div class="level-bar-container">
                                <div class="level-bar" id="level3-bar" style="width: 45%; background: linear-gradient(90deg, #4facfe, #00f2fe);"></div>
                            </div>
                            <div class="level-info">
                                <i class="fas fa-weight"></i>
                                <span id="level3-weight">~450g</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h2><i class="fas fa-bolt"></i> A√ß√µes R√°pidas</h2>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="feedAll()">
                            <i class="fas fa-users"></i>
                            <span>Alimentar Todos</span>
                        </button>
                        <button class="action-btn" onclick="testDispenser()">
                            <i class="fas fa-vial"></i>
                            <span>Testar Sistema</span>
                        </button>
                        <button class="action-btn" onclick="emergencyStop()">
                            <i class="fas fa-stop-circle"></i>
                            <span>Parada de Emerg√™ncia</span>
                        </button>
                        <button class="action-btn" onclick="calibrateServos()">
                            <i class="fas fa-sync-alt"></i>
                            <span>Calibrar Servos</span>
                        </button>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="statistics">
                    <h2><i class="fas fa-chart-line"></i> Estat√≠sticas do Dia</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-drumstick-bite"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="total-dispensed">60g</span>
                                <span class="stat-label">Total Dispensado</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="feeding-count">3</span>
                                <span class="stat-label">Alimenta√ß√µes</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-day"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="next-scheduled">12:00</span>
                                <span class="stat-label">Pr√≥xima Programada</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-server"></i>
                            <div class="stat-content">
                                <span class="stat-value" id="uptime">2h 34m</span>
                                <span class="stat-label">Tempo Ativo</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pets Tab -->
        <div class="tab-content" id="pets-tab">
            <h2><i class="fas fa-paw"></i> Gerenciar Pets</h2>
            <div class="pets-management">
                <div class="pet-config-card">
                    <h3>Felix (Compartimento 1)</h3>
                    <form id="pet1-form">
                        <div class="form-group">
                            <label>Nome do Pet</label>
                            <input type="text" id="pet1-config-name" value="Felix">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quantidade Di√°ria (g)</label>
                                <input type="number" id="pet1-daily" value="60" min="10" max="200">
                            </div>
                            <div class="form-group">
                                <label>Refei√ß√µes por Dia</label>
                                <input type="number" id="pet1-meals" value="3" min="1" max="6">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tamanho da Por√ß√£o (g)</label>
                                <input type="number" id="pet1-portion" value="20" min="5" max="100">
                            </div>
                            <div class="form-group">
                                <label>Status</label>
                                <select id="pet1-status">
                                    <option value="active">Ativo</option>
                                    <option value="inactive">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Notas / Observa√ß√µes</label>
                            <textarea id="pet1-notes" rows="3">Gato adulto, castrado, tend√™ncia a obesidade</textarea>
                        </div>
                        <button type="submit" class="save-btn">
                            <i class="fas fa-save"></i> Salvar Configura√ß√µes
                        </button>
                    </form>
                </div>

                <div class="pet-config-card">
                    <h3>Luna (Compartimento 2)</h3>
                    <form id="pet2-form">
                        <div class="form-group">
                            <label>Nome do Pet</label>
                            <input type="text" id="pet2-config-name" value="Luna">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quantidade Di√°ria (g)</label>
                                <input type="number" id="pet2-daily" value="50" min="10" max="200">
                            </div>
                            <div class="form-group">
                                <label>Refei√ß√µes por Dia</label>
                                <input type="number" id="pet2-meals" value="3" min="1" max="6">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tamanho da Por√ß√£o (g)</label>
                                <input type="number" id="pet2-portion" value="16.7" min="5" max="100" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Status</label>
                                <select id="pet2-status">
                                    <option value="active">Ativo</option>
                                    <option value="inactive">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Notas / Observa√ß√µes</label>
                            <textarea id="pet2-notes" rows="3">Gata jovem, muito ativa</textarea>
                        </div>
                        <button type="submit" class="save-btn">
                            <i class="fas fa-save"></i> Salvar Configura√ß√µes
                        </button>
                    </form>
                </div>

                <div class="pet-config-card">
                    <h3>Max (Compartimento 3)</h3>
                    <form id="pet3-form">
                        <div class="form-group">
                            <label>Nome do Pet</label>
                            <input type="text" id="pet3-config-name" value="Max">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quantidade Di√°ria (g)</label>
                                <input type="number" id="pet3-daily" value="70" min="10" max="200">
                            </div>
                            <div class="form-group">
                                <label>Refei√ß√µes por Dia</label>
                                <input type="number" id="pet3-meals" value="3" min="1" max="6">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tamanho da Por√ß√£o (g)</label>
                                <input type="number" id="pet3-portion" value="23.3" min="5" max="100" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Status</label>
                                <select id="pet3-status">
                                    <option value="active">Ativo</option>
                                    <option value="inactive">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Notas / Observa√ß√µes</label>
                            <textarea id="pet3-notes" rows="3">Gato grande, maine coon, alto consumo</textarea>
                        </div>
                        <button type="submit" class="save-btn">
                            <i class="fas fa-save"></i> Salvar Configura√ß√µes
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Schedule Tab -->
        <div class="tab-content" id="schedule-tab">
            <h2><i class="fas fa-calendar-alt"></i> Hor√°rios de Alimenta√ß√£o</h2>
            
            <div class="schedule-controls">
                <button class="add-schedule-btn" onclick="addNewSchedule()">
                    <i class="fas fa-plus-circle"></i> Adicionar Novo Hor√°rio
                </button>
            </div>

            <div class="schedule-list" id="schedule-list">
                <!-- Schedule items will be dynamically added here -->
            </div>

            <!-- Schedule Template -->
            <template id="schedule-template">
                <div class="schedule-item">
                    <div class="schedule-time">
                        <input type="time" class="time-input" value="07:00">
                    </div>
                    <div class="schedule-pet">
                        <select class="pet-select">
                            <option value="0">Todos os Pets</option>
                            <option value="1">Felix</option>
                            <option value="2">Luna</option>
                            <option value="3">Max</option>
                        </select>
                    </div>
                    <div class="schedule-amount">
                        <input type="number" class="amount-input" value="20" min="5" max="100">
                        <span>gramas</span>
                    </div>
                    <div class="schedule-days">
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Dom
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Seg
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Ter
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Qua
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Qui
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> Sex
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" checked> S√°b
                        </label>
                    </div>
                    <div class="schedule-actions">
                        <button class="toggle-btn active" onclick="toggleSchedule(this)">
                            <i class="fas fa-toggle-on"></i>
                        </button>
                        <button class="delete-btn" onclick="deleteSchedule(this)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </template>
        </div>

        <!-- History Tab -->
        <div class="tab-content" id="history-tab">
            <h2><i class="fas fa-history"></i> Hist√≥rico de Alimenta√ß√£o</h2>
            
            <div class="history-filters">
                <select id="history-filter-pet">
                    <option value="all">Todos os Pets</option>
                    <option value="1">Felix</option>
                    <option value="2">Luna</option>
                    <option value="3">Max</option>
                </select>
                <select id="history-filter-type">
                    <option value="all">Todos os Tipos</option>
                    <option value="scheduled">Programado</option>
                    <option value="manual">Manual</option>
                    <option value="presence">Presen√ßa</option>
                </select>
                <button class="export-btn" onclick="exportHistory()">
                    <i class="fas fa-download"></i> Exportar CSV
                </button>
            </div>

            <div class="history-table-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Data/Hora</th>
                            <th>Pet</th>
                            <th>Quantidade</th>
                            <th>Tipo</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="history-tbody">
                        <!-- History entries will be added here -->
                    </tbody>
                </table>
            </div>

            <div class="history-chart">
                <h3>Consumo Semanal</h3>
                <canvas id="consumption-chart"></canvas>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="settings-tab">
            <h2><i class="fas fa-cog"></i> Configura√ß√µes do Sistema</h2>
            
            <div class="settings-sections">
                <!-- WiFi Settings -->
                <div class="settings-card">
                    <h3><i class="fas fa-wifi"></i> Configura√ß√µes de Rede</h3>
                    <form id="wifi-form">
                        <div class="form-group">
                            <label>Nome da Rede (SSID)</label>
                            <input type="text" id="wifi-ssid" placeholder="Nome do WiFi">
                        </div>
                        <div class="form-group">
                            <label>Senha</label>
                            <input type="password" id="wifi-password" placeholder="Senha do WiFi">
                        </div>
                        <div class="form-group">
                            <label>IP Atual</label>
                            <input type="text" id="current-ip" readonly value="192.168.1.100">
                        </div>
                        <button type="submit" class="save-btn">Atualizar WiFi</button>
                    </form>
                </div>

                <!-- Servo Calibration -->
                <div class="settings-card">
                    <h3><i class="fas fa-sliders-h"></i> Calibra√ß√£o dos Servos</h3>
                    <div class="calibration-controls">
                        <div class="calibration-item">
                            <label>Servo 1 - √Çngulo Fechado</label>
                            <input type="range" id="servo1-close" min="0" max="180" value="90">
                            <span id="servo1-close-value">90¬∞</span>
                        </div>
                        <div class="calibration-item">
                            <label>Servo 1 - √Çngulo Aberto</label>
                            <input type="range" id="servo1-open" min="0" max="180" value="0">
                            <span id="servo1-open-value">0¬∞</span>
                        </div>
                        <div class="calibration-item">
                            <label>Servo 2 - √Çngulo Fechado</label>
                            <input type="range" id="servo2-close" min="0" max="180" value="90">
                            <span id="servo2-close-value">90¬∞</span>
                        </div>
                        <div class="calibration-item">
                            <label>Servo 2 - √Çngulo Aberto</label>
                            <input type="range" id="servo2-open" min="0" max="180" value="0">
                            <span id="servo2-open-value">0¬∞</span>
                        </div>
                        <div class="calibration-item">
                            <label>Servo 3 - √Çngulo Fechado</label>
                            <input type="range" id="servo3-close" min="0" max="180" value="90">
                            <span id="servo3-close-value">90¬∞</span>
                        </div>
                        <div class="calibration-item">
                            <label>Servo 3 - √Çngulo Aberto</label>
                            <input type="range" id="servo3-open" min="0" max="180" value="0">
                            <span id="servo3-open-value">0¬∞</span>
                        </div>
                        <button class="test-btn" onclick="testServoCalibration()">Testar Calibra√ß√£o</button>
                    </div>
                </div>

                <!-- Notification Settings -->
                <div class="settings-card">
                    <h3><i class="fas fa-bell"></i> Notifica√ß√µes</h3>
                    <form id="notification-form">
                        <div class="form-group">
                            <label class="switch">
                                <input type="checkbox" id="enable-notifications" checked>
                                <span class="slider"></span>
                            </label>
                            <label for="enable-notifications">Ativar Notifica√ß√µes</label>
                        </div>
                        <div class="form-group">
                            <label>Telegram Bot Token</label>
                            <input type="text" id="telegram-token" placeholder="Token do bot">
                        </div>
                        <div class="form-group">
                            <label>Telegram Chat ID</label>
                            <input type="text" id="telegram-chat-id" placeholder="ID do chat">
                        </div>
                        <div class="form-group">
                            <label>Alertar quando n√≠vel abaixo de (%)</label>
                            <input type="number" id="low-level-threshold" value="20" min="10" max="50">
                        </div>
                        <button type="submit" class="save-btn">Salvar Notifica√ß√µes</button>
                    </form>
                </div>

                <!-- System Actions -->
                <div class="settings-card">
                    <h3><i class="fas fa-tools"></i> A√ß√µes do Sistema</h3>
                    <div class="system-actions">
                        <button class="action-btn" onclick="resetSystem()">
                            <i class="fas fa-redo"></i> Reiniciar Sistema
                        </button>
                        <button class="action-btn" onclick="factoryReset()">
                            <i class="fas fa-exclamation-triangle"></i> Reset de F√°brica
                        </button>
                        <button class="action-btn" onclick="backupSettings()">
                            <i class="fas fa-download"></i> Backup Configura√ß√µes
                        </button>
                        <button class="action-btn" onclick="restoreSettings()">
                            <i class="fas fa-upload"></i> Restaurar Configura√ß√µes
                        </button>
                        <button class="action-btn" onclick="updateFirmware()">
                            <i class="fas fa-microchip"></i> Atualizar Firmware
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for notifications -->
    <div class="modal" id="notification-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Notifica√ß√£o</h2>
            <p id="modal-message"></p>
            <button class="modal-btn" onclick="closeModal()">OK</button>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
        <p>Processando...</p>
    </div>

    <script src="script.js"></script>
</body>
</html>
